import{c as P,r,j as e}from"./index-CjzFIWvj.js";import{S as R}from"./Section-B0GT5eCX.js";const I=[{id:1,name:"新人的家人 Family",seats:10},{id:2,name:"同學 Friends",seats:10},{id:3,name:"同事 Colleagues",seats:10},{id:4,name:"旅伴 Travelmates",seats:10},{id:5,name:"親戚 Relatives",seats:10},{id:6,name:"特別來賓 VIP",seats:10}],S=[{name:"莊冠霖",aliases:["Eric","Zhuang Guanlin"],tableId:3,seatNo:5},{name:"王小明",tableId:1,seatNo:3},{name:"李小美",tableId:1,seatNo:4}],u=(c="")=>c.toLowerCase().replace(/\s+/g,"").trim();function D(){var N,w;const{theme:c}=P(),[f,g]=r.useState(""),x=r.useRef({}),n=u(f),l=r.useMemo(()=>n?S.filter(s=>[s.name,...s.aliases||[]].some(a=>u(a).includes(n))):[],[n]),t=r.useMemo(()=>{if(!n)return null;if(!l.length)return{notFound:!0};const s=l[0],a=I.find(i=>i.id===s.tableId);return{guest:s,table:a}},[l,n]);r.useEffect(()=>{var s;(s=t==null?void 0:t.table)!=null&&s.id&&x.current[t.table.id]&&x.current[t.table.id].scrollIntoView({behavior:"smooth",block:"center"})},[(N=t==null?void 0:t.table)==null?void 0:N.id]);const m=r.useMemo(()=>l.slice(0,5),[l]),p=t!=null&&t.guest?(w=t.table)==null?void 0:w.id:null,_=n&&m.length>0&&!(m.length===1&&u(m[0].name)===n),k=c==="tang"?"border-cinnabar/50":"border-gold/60",j=c==="tang"?"bg-cinnabar text-white border-cinnabar":"bg-forest text-white border-forest",M=s=>{g(s.name)};return e.jsxs(e.Fragment,{children:[e.jsx("style",{children:`
        @keyframes pulse-once {
          0%, 100% {
            transform: scale(1);
            opacity: 1;
          }
          50% {
            transform: scale(1.3);
            opacity: 0.7;
          }
        }
        .animate-pulse-once {
          animation: pulse-once 1s ease-in-out 2;
        }
      `}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2 md:gap-10",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"mb-3 text-xl font-serif text-stone-800 md:text-2xl",children:"查詢座位"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{value:f,onChange:s=>g(s.target.value),placeholder:"輸入姓名 / Name / Pinyin（例：wang xiaoming)",className:"w-full rounded-2xl border border-stone-300/60 bg-white/90 px-11 py-3 font-sans text-base text-stone-700 outline-none transition focus:border-rose-200 focus:ring-2 focus:ring-rose-200/60"}),e.jsx("span",{className:"pointer-events-none absolute left-4 top-1/2 -translate-y-1/2 text-lg opacity-70",children:"🔎"}),_&&e.jsx("ul",{className:"absolute left-0 right-0 top-full z-20 mt-2 overflow-hidden rounded-2xl border border-rose-200/70 bg-white/95 shadow-soft backdrop-blur",children:m.map(s=>{var a;return e.jsx("li",{children:e.jsxs("button",{type:"button",onMouseDown:i=>{i.preventDefault(),M(s)},className:"flex w-full items-center justify-between gap-3 px-4 py-2 text-left text-sm text-stone-700 transition hover:bg-rose-50/80",children:[e.jsx("span",{className:"font-medium text-stone-800",children:s.name}),(a=s.aliases)!=null&&a.length?e.jsx("span",{className:"text-xs text-stone-500",children:s.aliases.join(" · ")}):e.jsxs("span",{className:"text-xs text-stone-400",children:["Table ",s.tableId]})]})},`${s.tableId}-${s.seatNo}`)})})]}),e.jsxs("div",{className:"mt-4 rounded-2xl border border-stone-300/60 bg-white/85 p-4 shadow-soft",children:[!n&&e.jsxs("p",{className:"font-sans text-sm text-stone-600 md:text-base",children:["支援中文 / 英文 / 拼音，若姓名可能有不同寫法，可在資料加入 ",e.jsx("code",{children:"aliases"}),"。"]}),n&&(t==null?void 0:t.notFound)&&e.jsx("p",{className:"font-sans text-sm text-rose-500",children:"找不到此賓客，請確認姓名是否正確，或聯繫新人協助確認座位。"}),(t==null?void 0:t.guest)&&t.table&&e.jsxs("div",{className:"space-y-2 font-sans text-stone-700",children:[e.jsxs("p",{className:"text-lg",children:["賓客：",e.jsx("b",{className:"font-serif text-stone-900",children:t.guest.name})]}),e.jsxs("p",{children:["桌次：",e.jsxs("b",{className:"font-serif text-stone-900",children:["Table ",t.table.id]}),"（",t.table.name,"）"]}),e.jsx("p",{className:"text-xs text-stone-500",children:"已為您高亮桌面位置並自動捲動至該桌，祝您今晚與親友歡聚。"}),e.jsx("span",{className:`inline-block rounded-full px-3 py-1 text-xs tracking-wide ${j}`,children:"已定位"})]})]}),e.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-3 text-sm text-stone-600",children:[e.jsxs("span",{className:"inline-flex items-center gap-2",children:[e.jsx("i",{className:"inline-block h-3 w-3 rounded-full bg-stone-800"}),"已安排"]}),e.jsxs("span",{className:"inline-flex items-center gap-2",children:[e.jsx("i",{className:"inline-block h-3 w-3 rounded-full border border-stone-300/60 bg-white"}),"空位"]}),e.jsxs("span",{className:"inline-flex items-center gap-2",children:[e.jsx("i",{className:`inline-block h-3 w-3 rounded-full border ${j}`}),"您的位置"]})]})]}),e.jsx("div",{className:"grid grid-cols-2 gap-4 sm:grid-cols-3",children:I.map(s=>{const a=p===s.id,i=!!(p&&!a);return e.jsxs("div",{ref:v=>x.current[s.id]=v,className:`relative rounded-2xl bg-white/90 p-4 shadow-soft transition duration-300 ease-out ${a?"border-amber-400 border-4 scale-105 transform-gpu shadow-lg":"border border-stone-200"} ${i?"opacity-40 blur-[1px]":""}`,children:[e.jsxs("div",{className:"text-sm text-stone-500",children:["Table ",s.id]}),e.jsx("div",{className:"font-serif text-lg text-stone-800",children:s.name}),e.jsxs("div",{className:`relative mx-auto mt-3 h-40 w-40 rounded-full border-[6px] ${k} bg-gradient-to-b from-white to-ivory shadow-[0_10px_30px_rgba(0,0,0,0.08)]`,children:[e.jsx("span",{className:"pointer-events-none absolute inset-0 rounded-full shadow-[inset_0_0_0_6px_rgba(255,255,255,0.7)]"}),Array.from({length:s.seats}).map((v,d)=>{const y=d/s.seats*Math.PI*2,T=80+Math.cos(y)*76,C=80+Math.sin(y)*76,o=S.find($=>$.tableId===s.id&&$.seatNo===d+1),F=(t==null?void 0:t.guest)&&(o==null?void 0:o.name)===t.guest.name,b="absolute -translate-x-1/2 -translate-y-1/2 h-5 w-5 rounded-full border transition-transform duration-300 ease-out";let h=`${b} bg-white border-stone-300/60`;o&&(h=`${b} bg-stone-800 border-stone-800`),F&&(h=`${b} animate-pulse-once border-amber-400 bg-amber-200/80 shadow-lg`);const E=o?`Seat ${d+1} — ${o.name}`:`Seat ${d+1}`;return e.jsx("div",{style:{left:T,top:C},title:E,className:h},d)})]})]},s.id)})})]})]})}function Q(){return e.jsx("main",{children:e.jsx(R,{title:"座位表",subtitle:"找到您的座位，今晚一起舉杯歡慶",children:e.jsx(D,{})})})}export{Q as default};
